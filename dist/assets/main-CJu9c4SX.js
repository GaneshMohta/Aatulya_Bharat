import{g as we,r as Ee}from"./vendor-BvbJF06O.js";var me={exports:{}},ge={exports:{}};(()=>{var j={d:(r,R)=>{for(var f in R)j.o(R,f)&&!j.o(r,f)&&Object.defineProperty(r,f,{enumerable:!0,get:R[f]})},o:(r,R)=>Object.prototype.hasOwnProperty.call(r,R),r:r=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})}},_={};j.r(_),j.d(_,{default:()=>N});const N=function(r){var R=r.condition,f=r.show,k=r.elseShow,F=function(z){return typeof z=="function"},D=function(z){return z()||(console.warn("Nothing was returned from your render function. Please make sure you are returning a valid React element."),null)};return R?F(f)?D(f):f:!R&&k?F(k)?D(k):k:null};ge.exports=_})();var Pe=ge.exports;(()=>{var j={n:e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return j.d(t,{a:t}),t},d:(e,t)=>{for(var a in t)j.o(t,a)&&!j.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},_={};j.r(_),j.d(_,{Chatbot:()=>ie,createChatBotMessage:()=>D,createClientMessage:()=>$,createCustomMessage:()=>z,default:()=>ve,useChatbot:()=>ce});const N=Ee;var r=j.n(N);const R=Pe;var f=j.n(R),k=function(){return k=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},k.apply(this,arguments)},F=function(e,t){return{message:e,type:t,id:Math.round(Date.now()*Math.random())}},D=function(e,t){return k(k(k({},F(e,"bot")),t),{loading:!0})},z=function(e,t,a){return k(k({},F(e,t)),a)},$=function(e,t){return k(k({},F(e,"user")),t)},J=function(e){for(var t=[],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(e)return e.apply(void 0,t)};function X(){return X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},X.apply(this,arguments)}const de=({styles:e={},...t})=>r().createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},t),r().createElement("path",{d:"M256 288c79.5 0 144-64.5 144-144S335.5 0 256 0 112 64.5 112 144s64.5 144 144 144zm128 32h-55.1c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16H128C57.3 320 0 377.3 0 448v16c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48v-16c0-70.7-57.3-128-128-128z"})),fe=function(e){var t=e.message,a=e.customComponents;return r().createElement("div",{className:"react-chatbot-kit-user-chat-message-container"},r().createElement(f(),{condition:!!a.userChatMessage,show:J(a.userChatMessage,{message:t}),elseShow:r().createElement("div",{className:"react-chatbot-kit-user-chat-message"},t,r().createElement("div",{className:"react-chatbot-kit-user-chat-message-arrow"}))}),r().createElement(f(),{condition:!!a.userAvatar,show:J(a.userAvatar),elseShow:r().createElement("div",{className:"react-chatbot-kit-user-avatar"},r().createElement("div",{className:"react-chatbot-kit-user-avatar-container"},r().createElement(de,{className:"react-chatbot-kit-user-avatar-icon"})))}))},pe=function(){return r().createElement("div",{className:"react-chatbot-kit-chat-bot-avatar"},r().createElement("div",{className:"react-chatbot-kit-chat-bot-avatar-container"},r().createElement("p",{className:"react-chatbot-kit-chat-bot-avatar-letter"},"B")))},ee=function(){return r().createElement("div",{className:"chatbot-loader-container"},r().createElement("svg",{id:"dots",width:"50px",height:"21px",viewBox:"0 0 132 58",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},r().createElement("g",{stroke:"none",fill:"none"},r().createElement("g",{id:"chatbot-loader",fill:"#fff"},r().createElement("circle",{id:"chatbot-loader-dot1",cx:"25",cy:"30",r:"13"}),r().createElement("circle",{id:"chatbot-loader-dot2",cx:"65",cy:"30",r:"13"}),r().createElement("circle",{id:"chatbot-loader-dot3",cx:"105",cy:"30",r:"13"})))))};var K=function(){return K=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},K.apply(this,arguments)};const Y=function(e){var t=e.message,a=e.withAvatar,n=a===void 0||a,o=e.loading,l=e.messages,i=e.customComponents,P=e.setState,T=e.customStyles,v=e.delay,A=e.id,W=(0,N.useState)(!1),g=W[0],w=W[1];(0,N.useEffect)(function(){var y;return function(S,B){var I=750;v&&(I+=v),y=setTimeout(function(){var E=function(O,m,c){if(c||arguments.length===2)for(var d,p=0,b=m.length;p<b;p++)!d&&p in m||(d||(d=Array.prototype.slice.call(m,0,p)),d[p]=m[p]);return O.concat(d||Array.prototype.slice.call(m))}([],S,!0).find(function(O){return O.id===A});E&&(E.loading=!1,E.delay=void 0,B(function(O){var m=O.messages,c=m.findIndex(function(d){return d.id===A});return m[c]=E,K(K({},O),{messages:m})}))},I)}(l,P),function(){clearTimeout(y)}},[v,A]),(0,N.useEffect)(function(){v?setTimeout(function(){return w(!0)},v):w(!0)},[v]);var H={backgroundColor:""},M={borderRightColor:""};return T&&(H.backgroundColor=T.backgroundColor,M.borderRightColor=T.backgroundColor),r().createElement(f(),{condition:g,show:r().createElement("div",{className:"react-chatbot-kit-chat-bot-message-container"},r().createElement(f(),{condition:n,show:r().createElement(f(),{condition:!!(i!=null&&i.botAvatar),show:J(i==null?void 0:i.botAvatar),elseShow:r().createElement(pe,null)})}),r().createElement(f(),{condition:!!(i!=null&&i.botChatMessage),show:J(i==null?void 0:i.botChatMessage,{message:t,loader:r().createElement(ee,null)}),elseShow:r().createElement("div",{className:"react-chatbot-kit-chat-bot-message",style:H},r().createElement(f(),{condition:o,show:r().createElement(ee,null),elseShow:r().createElement("span",null,t)}),r().createElement(f(),{condition:n,show:r().createElement("div",{className:"react-chatbot-kit-chat-bot-message-arrow",style:M})}))}))})};function Z(){return Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Z.apply(this,arguments)}const he=({styles:e={},...t})=>r().createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512"},t),r().createElement("path",{d:"M476 3.2L12.5 270.6c-18.1 10.4-15.8 35.6 2.2 43.2L121 358.4l287.3-253.2c5.5-4.9 13.3 2.6 8.6 8.3L176 407v80.5c0 23.6 28.5 32.9 42.5 15.8L282 426l124.6 52.2c14.2 6 30.4-2.9 33-18.2l72-432C515 7.8 493.3-6.8 476 3.2z"}));var C=function(){return C=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},C.apply(this,arguments)},te=function(e,t,a){if(a||arguments.length===2)for(var n,o=0,l=t.length;o<l;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};const re=function(e){var t=e.state,a=e.setState,n=e.widgetRegistry,o=e.messageParser,l=e.parse,i=e.customComponents,P=e.actionProvider,T=e.botName,v=e.customStyles,A=e.headerText,W=e.customMessages,g=e.placeholderText,w=e.validator,H=e.disableScrollToBottom,M=e.messageHistory,y=e.actions,S=e.messageContainerRef,B=t.messages,I=(0,N.useState)(""),E=I[0],O=I[1],m=function(){setTimeout(function(){var s;S.current&&(S.current.scrollTop=(s=S==null?void 0:S.current)===null||s===void 0?void 0:s.scrollHeight)},50)};(0,N.useEffect)(function(){H||m()});var c=function(){a(function(s){return C(C({},s),{messages:te(te([],s.messages,!0),[F(E,"user")],!1)})}),m(),O("")},d={backgroundColor:""};v&&v.chatButton&&(d.backgroundColor=v.chatButton.backgroundColor);var p="Conversation with "+T;A&&(p=A);var b="Write your message here";return g&&(b=g),r().createElement("div",{className:"react-chatbot-kit-chat-container"},r().createElement("div",{className:"react-chatbot-kit-chat-inner-container"},r().createElement(f(),{condition:!!i.header,show:i.header&&i.header(P),elseShow:r().createElement("div",{className:"react-chatbot-kit-chat-header"},p)}),r().createElement("div",{className:"react-chatbot-kit-chat-message-container",ref:S},r().createElement(f(),{condition:typeof M=="string"&&!!M,show:r().createElement("div",{dangerouslySetInnerHTML:{__html:M}})}),B.map(function(s,U){return s.type==="bot"?r().createElement(r().Fragment,{key:s.id},function(u,h){var x;x=u.withAvatar?u.withAvatar:function(be,le){if(le===0)return!0;var ue=be[le-1];return!(ue.type==="bot"&&!ue.widget)}(B,h);var q=C(C({},u),{setState:a,state:t,customComponents:i,widgetRegistry:n,messages:B,actions:y});if(u.widget){var ye=n.getWidget(q.widget,C(C({},t),{scrollIntoView:m,payload:u.payload,actions:y}));return r().createElement(r().Fragment,null,r().createElement(Y,C({customStyles:v.botMessageBox,withAvatar:x},q,{key:u.id})),r().createElement(f(),{condition:!q.loading,show:ye||null}))}return r().createElement(Y,C({customStyles:v.botMessageBox,key:u.id,withAvatar:x},q,{customComponents:i,messages:B,setState:a}))}(s,U)):s.type==="user"?r().createElement(r().Fragment,{key:s.id},function(u){var h=n.getWidget(u.widget,C(C({},t),{scrollIntoView:m,payload:u.payload,actions:y}));return r().createElement(r().Fragment,null,r().createElement(fe,{message:u.message,key:u.id,customComponents:i}),h||null)}(s)):function(u,h){return!!h[u.type]}(s,W)?r().createElement(r().Fragment,{key:s.id},function(u){var h=W[u.type],x={setState:a,state:t,scrollIntoView:m,actionProvider:P,payload:u.payload,actions:y};if(u.widget){var q=n.getWidget(u.widget,C(C({},t),{scrollIntoView:m,payload:u.payload,actions:y}));return r().createElement(r().Fragment,null,h(x),q||null)}return h(x)}(s)):void 0}),r().createElement("div",{style:{paddingBottom:"15px"}})),r().createElement("div",{className:"react-chatbot-kit-chat-input-container"},r().createElement("form",{className:"react-chatbot-kit-chat-input-form",onSubmit:function(s){if(s.preventDefault(),w&&typeof w=="function"){if(w(E)){if(c(),l)return l(E);o.parse(E)}}else{if(c(),l)return l(E);o.parse(E)}}},r().createElement("input",{className:"react-chatbot-kit-chat-input",placeholder:b,value:E,onChange:function(s){return O(s.target.value)}}),r().createElement("button",{className:"react-chatbot-kit-chat-btn-send",style:d},r().createElement(he,{className:"react-chatbot-kit-chat-btn-send-icon"}))))))},ae=function(e){var t=e.message;return r().createElement("div",{className:"react-chatbot-kit-error"},r().createElement("h1",{className:"react-chatbot-kit-error-header"},"Ooops. Something is missing."),r().createElement("div",{className:"react-chatbot-kit-error-container"},r().createElement(Y,{message:t,withAvatar:!0,loading:!1,id:1,customStyles:{backgroundColor:""},messages:[]})),r().createElement("a",{href:"https://fredrikoseberg.github.io/react-chatbot-kit-docs/",rel:"noopener norefferer",target:"_blank",className:"react-chatbot-kit-error-docs"},"View the docs"))};var oe=function(e){return e.widgets?e.widgets:[]},Q=function(e){try{new e}catch{return!1}return!0},V=function(){return V=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},V.apply(this,arguments)};const ne=function(e,t){var a=this;this.addWidget=function(n,o){var l=n.widgetName,i=n.widgetFunc,P=n.mapStateToProps,T=n.props;a[l]={widget:i,props:T,mapStateToProps:P,parentProps:V({},o)}},this.getWidget=function(n,o){var l=a[n];if(l){var i,P=V(V(V(V({scrollIntoView:o.scrollIntoView},l.parentProps),typeof(i=l.props)=="object"?i:{}),a.mapStateToProps(l.mapStateToProps,o)),{setState:a.setState,actionProvider:a.actionProvider||o.actions,actions:o.actions,state:o,payload:o.payload});return l.widget(P)||null}},this.mapStateToProps=function(n,o){if(n)return n.reduce(function(l,i){return l[i]=o[i],l},{})},this.setState=e,this.actionProvider=t};var G=function(){return G=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},G.apply(this,arguments)},se=function(e,t,a){if(a||arguments.length===2)for(var n,o=0,l=t.length;o<l;o++)!n&&o in t||(n||(n=Array.prototype.slice.call(t,0,o)),n[o]=t[o]);return e.concat(n||Array.prototype.slice.call(t))};const ce=function(e){var t=e.config,a=e.actionProvider,n=e.messageParser,o=e.messageHistory,l=e.runInitialMessagesWithHistory,i=e.saveMessages,P=function(c,d){var p={};for(var b in c)Object.prototype.hasOwnProperty.call(c,b)&&d.indexOf(b)<0&&(p[b]=c[b]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function"){var s=0;for(b=Object.getOwnPropertySymbols(c);s<b.length;s++)d.indexOf(b[s])<0&&Object.prototype.propertyIsEnumerable.call(c,b[s])&&(p[b[s]]=c[b[s]])}return p}(e,["config","actionProvider","messageParser","messageHistory","runInitialMessagesWithHistory","saveMessages"]),T="",v="";if(!t||!a||!n)return{configurationError:T="I think you forgot to feed me some props. Did you remember to pass a config, a messageparser and an actionprovider?"};var A=function(c,d){var p=[];return c.initialMessages||p.push("Config must contain property 'initialMessages', and it expects it to be an array of chatbotmessages."),p}(t);if(A.length)return{invalidPropsError:v=A.reduce(function(c,d){return c+d},"")};var W=function(c){return c.state?c.state:{}}(t);o&&Array.isArray(o)?t.initialMessages=se([],o,!0):typeof o=="string"&&o&&(l||(t.initialMessages=[]));var g,w,H,M=r().useState(G({messages:se([],t.initialMessages,!0)},W)),y=M[0],S=M[1],B=r().useRef(y.messages),I=r().useRef(),E=r().useRef();(0,N.useEffect)(function(){B.current=y.messages}),(0,N.useEffect)(function(){o&&Array.isArray(o)&&S(function(c){return G(G({},c),{messages:o})})},[]),(0,N.useEffect)(function(){var c=E.current;return function(){if(i&&typeof i=="function"){var d=c.innerHTML.toString();i(B.current,d)}}},[]),(0,N.useEffect)(function(){I.current=y},[y]);var O=a,m=n;return Q(O)&&Q(m)?(g=new a(D,S,$,I.current,z,P),w=new ne(S,g),H=new n(g,I.current),oe(t).forEach(function(c){return w==null?void 0:w.addWidget(c,P)})):(g=a,H=n,w=new ne(S,null),oe(t).forEach(function(c){return w==null?void 0:w.addWidget(c,P)})),{widgetRegistry:w,actionProv:g,messagePars:H,configurationError:T,invalidPropsError:v,state:y,setState:S,messageContainerRef:E,ActionProvider:O,MessageParser:m}};var L=function(){return L=Object.assign||function(e){for(var t,a=1,n=arguments.length;a<n;a++)for(var o in t=arguments[a])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},L.apply(this,arguments)};const ie=function(e){var t=e.actionProvider,a=e.messageParser,n=e.config,o=e.headerText,l=e.placeholderText,i=e.saveMessages,P=e.messageHistory,T=e.runInitialMessagesWithHistory,v=e.disableScrollToBottom,A=e.validator,W=function(s,U){var u={};for(var h in s)Object.prototype.hasOwnProperty.call(s,h)&&U.indexOf(h)<0&&(u[h]=s[h]);if(s!=null&&typeof Object.getOwnPropertySymbols=="function"){var x=0;for(h=Object.getOwnPropertySymbols(s);x<h.length;x++)U.indexOf(h[x])<0&&Object.prototype.propertyIsEnumerable.call(s,h[x])&&(u[h[x]]=s[h[x]])}return u}(e,["actionProvider","messageParser","config","headerText","placeholderText","saveMessages","messageHistory","runInitialMessagesWithHistory","disableScrollToBottom","validator"]),g=ce(L({config:n,actionProvider:t,messageParser:a,messageHistory:P,saveMessages:i,runInitialMessagesWithHistory:T},W)),w=g.configurationError,H=g.invalidPropsError,M=g.ActionProvider,y=g.MessageParser,S=g.widgetRegistry,B=g.messageContainerRef,I=g.actionProv,E=g.messagePars,O=g.state,m=g.setState;if(w)return r().createElement(ae,{message:w});if(H.length)return r().createElement(ae,{message:H});var c=function(s){return s.customStyles?s.customStyles:{}}(n),d=function(s){return s.customComponents?s.customComponents:{}}(n),p=function(s){return s.botName?s.botName:"Bot"}(n),b=function(s){return s.customMessages?s.customMessages:{}}(n);return Q(M)&&Q(y)?r().createElement(re,{state:O,setState:m,widgetRegistry:S,actionProvider:I,messageParser:E,customMessages:b,customComponents:L({},d),botName:p,customStyles:L({},c),headerText:o,placeholderText:l,validator:A,messageHistory:P,disableScrollToBottom:v,messageContainerRef:B}):r().createElement(M,{state:O,setState:m,createChatBotMessage:D},r().createElement(y,null,r().createElement(re,{state:O,setState:m,widgetRegistry:S,actionProvider:M,messageParser:y,customMessages:b,customComponents:L({},d),botName:p,customStyles:L({},c),headerText:o,placeholderText:l,validator:A,messageHistory:P,disableScrollToBottom:v,messageContainerRef:B})))},ve=ie;me.exports=_})();var Se=me.exports;const ke=we(Se);export{ke as C,Se as b};
