import{j as e,a as A}from"./index-BMDUoIZi.js";import{r as l}from"./vendor-BvbJF06O.js";import{R as E}from"./quill.snow-C5kM1XZf.js";import{G as D}from"./index-BDNScrsr.js";import{B}from"./index-Bt3Pi6bf.js";import{u as L,L as P}from"./KnowIndia-B2i9pOXf.js";import"./iconBase-BmOo4IvN.js";function H(){const[r,h]=l.useState(""),[i,x]=l.useState(""),[b,f]=l.useState(""),[c,j]=l.useState(""),[d,v]=l.useState(!1),[n,u]=l.useState([]),m=l.useRef(null),y=L(),C=["States","Heritage","Innovation","Cultures","Taste","Others"],k=()=>v(!d),w=t=>{const{value:a,checked:s}=t.target;u(s?[...n,a]:n.filter(o=>o!==a))},p=l.useCallback(()=>{const t=document.createElement("input");t.setAttribute("type","file"),t.setAttribute("accept","image/*"),t.click(),t.onchange=()=>{const a=t.files[0],s=new FileReader;s.onload=()=>{const o=s.result,g=m.current.getEditor(),T=g.getSelection(!0);g.insertEmbed(T.index,"image",o,"user")},s.readAsDataURL(a)}},[]),N=l.useMemo(()=>({toolbar:{container:[[{header:[2,3,4,!1]}],["bold","italic","underline","blockquote"],[{color:[]}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["link","image"],["clean"]],handlers:{image:p}},clipboard:{matchVisual:!0}}),[p]),S=["header","bold","italic","underline","strike","blockquote","list","bullet","link","color","image","background","align","size","font"],F=t=>{const a=t.target.files[0];if(a&&a.type.startsWith("image/")){x(a);const s=new FileReader;s.onload=()=>{f(s.result)},s.readAsDataURL(a)}else alert("upload a valid image please")},R=async t=>{t.preventDefault();const a=new FormData;a.append("Title",r),a.append("image",i),a.append("QuillContent",c),a.append("selectedCategories",n);try{console.log("Form ",a);const s=localStorage.getItem("token"),o=await A.post("https://aatulya-bharat.onrender.com/blog/create",a,{headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${s}`}});console.log("res",o.data),y("/blogs")}catch(s){console.error("Error uploading the post:",s)}};return e.jsxs("div",{className:" h-auto pb-28",children:[e.jsx("div",{className:"flex justify-between p-2 aatulya-header bg-slate-300",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(P,{to:"/blogs",children:e.jsx("span",{className:"text-slate-950 relative top-1 hover:text-slate-950 duration-300",children:e.jsx(B,{})})}),e.jsx("h3",{children:"Aatulya Bharat"})]})}),e.jsx("p",{className:"text-center font-extrabold text-2xl text-gray-700 font-serif py-4",children:"Make a Blog for India"}),e.jsxs("form",{className:"p-4 m-4 mx-10",onSubmit:R,children:[e.jsx("input",{type:"text",name:"Title",id:"Title",className:"font-bold text-2xl list-none border-none bg-transparent mb-4 w-auto",placeholder:"Title",value:r,autoFocus:!0,onChange:t=>h(t.target.value)}),e.jsx("input",{type:"file",className:"hidden",id:"file",accept:"image/*",onChange:F}),e.jsx("label",{htmlFor:"file",className:"items-center cursor-pointer text-4xl",children:e.jsx(D,{className:"hover:text-blue-900 duration-300"})}),i&&e.jsx("div",{className:"mt-4",children:e.jsx("img",{src:b,alt:"Selected File Preview",className:"w-full max-w-xs"})}),e.jsx(E,{ref:m,value:c,onChange:j,modules:N,formats:S,className:"text-lg border-none bg-transparent font-normal w-4/5 h-auto focus:outline-none resize-none mt-4"}),e.jsx("br",{}),e.jsx("label",{children:"Category:"}),e.jsx("button",{type:"button",onClick:k,className:"dropbtn w-24 text-xs bg-gray-500 rounded-md h-12",children:"Select Categories"}),d&&e.jsx("div",{className:"dropdown-content",children:C.map(t=>e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",value:t,onChange:w,checked:n.includes(t)}),t]},t))}),e.jsx("br",{}),e.jsx("button",{type:"submit",className:"mt-4 p-2 bg-blue-500 text-white rounded-lg hover:bg-blue-700 transition duration-300",children:"Publish"})]})]})}export{H as default};
